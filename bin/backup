#!/bin/bash

ACTION=$1
HOST=$2
DESTINATION=data/wd-white-8tb/$HOSTNAME/

if [ "$ACTION" != "push" ] && [ "$ACTION" != "pull" ]; then
    echo "no action provided {push,pull}"
    exit 1
fi

if [ "$HOST" == "" ]; then
    HOST=ripley.local
fi

set -x

# push ########################################################################
if [ "$ACTION" == "push" ]; then
    rsync --recursive --delete --update --checksum --verbose --progress \
        $HOME/data $USER@$HOST:$DESTINATION
fi

# pull ########################################################################
if [ "$ACTION" == "pull" ]; then
    rsync --recursive --update --checksum --verbose --progress \
        $USER@$HOST:$DESTINATION $HOME
fi
